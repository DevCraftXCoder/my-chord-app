<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyChord - DevXCoder</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üéµ MyChord</h1>
            <p class="subtitle">by DevXCoder</p>
        </header>

        <main>
            <!-- BPM Control -->
            <section class="bpm-section">
                <h2>Tempo Control</h2>
                <div class="bpm-control">
                    <label for="bpm-slider">BPM: <span id="bpm-value">120</span></label>
                    <input type="range" id="bpm-slider" min="30" max="300" value="120">
                </div>
            </section>

            <!-- Instrument Selector -->
            <section class="instrument-section">
                <h2>üéπ Instrument</h2>
                <div class="instrument-controls">
                    <div class="picker-group">
                        <label>Sound:</label>
                        <select id="instrument-selector">
                            <optgroup label="Piano">
                                <option value="acoustic_grand_piano" selected>Acoustic Grand Piano</option>
                                <option value="bright_acoustic_piano">Bright Acoustic Piano</option>
                                <option value="electric_grand_piano">Electric Grand Piano</option>
                            </optgroup>
                            <optgroup label="Guitar">
                                <option value="acoustic_guitar_nylon">Acoustic Guitar (Nylon)</option>
                                <option value="acoustic_guitar_steel">Acoustic Guitar (Steel)</option>
                                <option value="electric_guitar_clean">Electric Guitar (Clean)</option>
                                <option value="electric_guitar_jazz">Electric Guitar (Jazz)</option>
                                <option value="overdriven_guitar">Overdriven Guitar</option>
                                <option value="distortion_guitar">Distortion Guitar</option>
                            </optgroup>
                            <optgroup label="Bass">
                                <option value="acoustic_bass">Acoustic Bass</option>
                                <option value="electric_bass_finger">Electric Bass (Finger)</option>
                            </optgroup>
                            <optgroup label="Strings">
                                <option value="violin">Violin</option>
                                <option value="cello">Cello</option>
                                <option value="string_ensemble_1">String Ensemble</option>
                                <option value="synth_strings_1">Synth Strings</option>
                            </optgroup>
                        </select>
                    </div>
                    <span id="instrument-status" class="instrument-status">Loading piano...</span>
                </div>
            </section>

            <!-- Chord Progression Builder -->
            <section class="progression-section">
                <h2>Chord Progression</h2>
                <div id="progression-container" class="progression-container">
                    <!-- Chord slots will be added here -->
                </div>
                <button id="add-chord-btn" class="btn btn-secondary">+ Add Chord</button>
            </section>

            <!-- Chord Picker Modal -->
            <div id="chord-picker-modal" class="modal">
                <div class="modal-content">
                    <h3>Choose a Chord</h3>
                    <div class="chord-picker">
                        <div class="picker-group">
                            <label>Root Note:</label>
                            <select id="root-picker">
                                <option value="C">C</option>
                                <option value="C#">C#</option>
                                <option value="D">D</option>
                                <option value="D#">D#</option>
                                <option value="E">E</option>
                                <option value="F">F</option>
                                <option value="F#">F#</option>
                                <option value="G">G</option>
                                <option value="G#">G#</option>
                                <option value="A">A</option>
                                <option value="A#">A#</option>
                                <option value="B">B</option>
                            </select>
                        </div>
                        <div class="picker-group">
                            <label>Chord Type:</label>
                            <select id="type-picker">
                                <optgroup label="Basic Triads">
                                    <option value="Major">Major</option>
                                    <option value="Minor">Minor</option>
                                    <option value="Dim">Diminished</option>
                                    <option value="Aug">Augmented</option>
                                    <option value="5">Power Chord (5)</option>
                                </optgroup>
                                <optgroup label="Suspended">
                                    <option value="Sus2">Sus2</option>
                                    <option value="Sus4">Sus4</option>
                                </optgroup>
                                <optgroup label="Seventh Chords">
                                    <option value="7">Dominant 7</option>
                                    <option value="Maj7">Major 7</option>
                                    <option value="Min7">Minor 7</option>
                                    <option value="Dim7">Diminished 7</option>
                                    <option value="Min7b5">Half-Diminished (m7‚ô≠5)</option>
                                    <option value="Aug7">Augmented 7</option>
                                    <option value="MinMaj7">Minor-Major 7</option>
                                </optgroup>
                                <optgroup label="Ninth Chords">
                                    <option value="9">Dominant 9</option>
                                    <option value="Maj9">Major 9</option>
                                    <option value="Min9">Minor 9</option>
                                    <option value="Add9">Add9</option>
                                </optgroup>
                                <optgroup label="Eleventh Chords">
                                    <option value="11">Dominant 11</option>
                                    <option value="Maj11">Major 11</option>
                                    <option value="Min11">Minor 11</option>
                                </optgroup>
                                <optgroup label="Thirteenth Chords">
                                    <option value="13">Dominant 13</option>
                                    <option value="Maj13">Major 13</option>
                                    <option value="Min13">Minor 13</option>
                                </optgroup>
                                <optgroup label="Sixth Chords">
                                    <option value="6">Major 6</option>
                                    <option value="Min6">Minor 6</option>
                                    <option value="6/9">6/9</option>
                                </optgroup>
                                <optgroup label="Altered Chords">
                                    <option value="7b5">7‚ô≠5</option>
                                    <option value="7#5">7‚ôØ5</option>
                                    <option value="7b9">7‚ô≠9</option>
                                    <option value="7#9">7‚ôØ9 (Hendrix)</option>
                                </optgroup>
                            </select>
                        </div>
                        <div class="picker-group">
                            <label>Duration (beats):</label>
                            <input type="number" id="beats-picker" min="1" max="16" value="4">
                        </div>
                    </div>
                    <div class="modal-actions">
                        <button id="confirm-chord-btn" class="btn btn-primary">Add</button>
                        <button id="cancel-chord-btn" class="btn btn-secondary">Cancel</button>
                    </div>
                </div>
            </div>

            <!-- Playback Controls -->
            <section class="playback-section">
                <h2>Playback</h2>
                <div class="playback-controls">
                    <button id="play-btn" class="btn btn-primary btn-large">‚ñ∂ Play</button>
                    <button id="stop-btn" class="btn btn-danger btn-large" disabled>‚ñ† Stop</button>
                    <label class="loop-toggle">
                        <input type="checkbox" id="loop-checkbox" checked>
                        Loop
                    </label>
                </div>
                <div id="playback-status" class="status-display">
                    Ready to play
                </div>
            </section>

            <!-- Drums Section -->
            <section class="drums-section">
                <h2>ü•Å Drum Track</h2>
                <div class="drums-controls">
                    <label class="drum-toggle">
                        <input type="checkbox" id="drums-enabled">
                        Enable Drums
                    </label>
                    <div class="picker-group">
                        <label>Pattern:</label>
                        <select id="drum-pattern">
                            <option value="basic">Trap</option>
                            <option value="pop">Melodic Trap</option>
                            <option value="jazz">Bouncy</option>
                            <option value="funk">Hard</option>
                            <option value="ballad">Chill Trap</option>
                            <option value="drill">Drill</option>
                            <option value="rage">Rage</option>
                            <option value="hyperpop">Hyperpop</option>
                            <option value="plugg">Plugg</option>
                            <option value="jersey">Jersey Club</option>
                            <option value="emo">Emo Trap</option>
                            <option value="yeat">Yeat Style</option>
                        </select>
                    </div>
                    <div class="picker-group">
                        <label>Volume: <span id="drum-volume-value">30%</span></label>
                        <input type="range" id="drum-volume" min="0" max="100" value="30">
                    </div>
                </div>
            </section>

            <!-- Key Helper Section -->
            <section class="key-helper-section">
                <h2>üéπ Key Helper</h2>
                <div class="key-helper-controls">
                    <div class="picker-group">
                        <label>Key:</label>
                        <select id="key-root">
                            <option value="C">C</option>
                            <option value="C#">C#</option>
                            <option value="D">D</option>
                            <option value="D#">D#</option>
                            <option value="E">E</option>
                            <option value="F">F</option>
                            <option value="F#">F#</option>
                            <option value="G">G</option>
                            <option value="G#">G#</option>
                            <option value="A">A</option>
                            <option value="A#">A#</option>
                            <option value="B">B</option>
                        </select>
                    </div>
                    <div class="picker-group">
                        <label>Mode:</label>
                        <select id="key-mode">
                            <option value="major">Major</option>
                            <option value="minor">Minor</option>
                        </select>
                    </div>
                    <button id="show-key-chords-btn" class="btn btn-secondary">Show Chords in Key</button>
                    <button id="suggest-progression-btn" class="btn btn-secondary">Suggest Progression</button>
                </div>
                <div id="key-info" class="key-info"></div>
            </section>

            <!-- Save/Load Section -->
            <section class="storage-section">
                <h2>üíæ Save & Load</h2>
                <div class="storage-controls">
                    <input type="text" id="progression-name" placeholder="Progression name..." class="progression-name-input">
                    <button id="save-btn" class="btn btn-primary">Save</button>
                    <button id="export-btn" class="btn btn-secondary">Export JSON</button>
                    <label class="btn btn-secondary import-btn">
                        Import JSON
                        <input type="file" id="import-file" accept=".json" style="display: none;">
                    </label>
                </div>
                <div id="saved-progressions" class="saved-progressions"></div>
            </section>

            <!-- Quick Start Preset -->
            <section class="preset-section">
                <h2>Quick Start</h2>
                <button id="load-preset-btn" class="btn btn-secondary">
                    Load Sample Progression (I-V-vi-IV)
                </button>
            </section>
        </main>

        <footer>
            <div class="footer-controls">
                <button id="theme-toggle" class="btn btn-secondary">üåô Dark Mode</button>
                <span>Keyboard: Space = Play/Stop | Ctrl+S = Save | Ctrl+N = New Chord</span>
            </div>
            <p>Backend: <span id="backend-status" class="status-indicator">‚óè</span> <span id="backend-url">localhost:8000</span></p>
        </footer>
    </div>

    <!-- Save Modal -->
    <div id="save-modal" class="modal">
        <div class="modal-content">
            <h3>Saved Progressions</h3>
            <div id="save-modal-list" class="save-modal-list"></div>
            <button id="close-save-modal" class="btn btn-secondary">Close</button>
        </div>
    </div>

    <script src="storage.js"></script>
    <script src="drums.js"></script>
    <script src="key-helper.js"></script>
    <script src="soundfont-synth.js"></script>
    <script src="app.js"></script>
</body>
</html>
